<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>alternatingComplex5OV_1002.cdy</title>
    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
        }

        #CSConsole {
            background-color: #FAFAFA;
            border-top: 1px solid #333333;
            bottom: 0px;
            height: 200px;
            overflow-y: scroll;
            position: fixed;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://cindyjs.org/dist/latest/CindyJS.css">
        <script type="text/javascript" src="https://cindyjs.org/dist/v0.7/Cindy.js"></script>
<script id="csdraw" type="text/x-cindyscript">


a(i):=1/i*(-1)^i;

col1=(0,0.6,0);
col3=(0.6,0,0);
col2=(0.3,0.3,0.8);
draw((0,0),(100,0),size->2,color->(0,0,0));
draw((0,-100),(0,100),size->2,color->(0,0,0));


A.x=0;
if(A.y<1,A.y=1);
k=A.y;
B.y=0;
if(B.x<2,B.x=2);
m=B.x/10;
repeat(50,i=#-25;
  draw((-.1,i*k),(.1,i*k),color->(0,0,0));
  drawtext((-.3,i*k-.1),i, align->"right",size->10);
);

D.x=0;
w=D.y/k;

draw((0,w*k),(100,w*k));
pi=1;
mi=2;
s=0;
ps=apply(1..2000,i,
  if(s<w%i==1,
    new=1/pi;pi=pi+2,
    new=-1/mi;mi=mi+2);
  s=s+new;
  new
);

hs=ps;


rect(a,b,w,h,col):=(
  fillpoly(((a,b),(a+w,b),(a+w,b+h),(a,b+h)),color->col,alpha->0.6);
  connect(((a,b),(a+w,b),(a+w,b+h),(a,b+h),(a,b)),color->(0,0,0),alpha->0.5);
);
n=1/m*80;

//hs=apply(1..n,a(#));
s=0;
ss=apply(1..n-1,s=s+hs_(#);s);


s=0;

apply(1..n,i,
  if(hs_i>0,
   draw(((i-1)*m,s*k),((i)*m,(s+hs_i)*k),color->col1,size->2);
  );
  if(hs_i<0,
   draw(((i-1)*m,s*k),((i)*m,(s+hs_i)*k),color->col3,size->2);
  );

//  drawtext((i*m,-.6),"$s_"+i+"$",size->10*sqrt(m),align->"center");
  s=s+hs_i;
);

s=0;
mm=min(m,.5);
apply(1..n,i,
   fillcircle(((i)*m,(s+hs_i)*k),mm*.3,color->(0,0,0),size->2);
   draw(((i)*m,(s+hs_i)*k),(i*m,0),color->(0,0,0),size->1,alpha->0.3);
    s=s+hs_i;
);



xy=C.xy;
i=round(xy.x/m);
//drawtext(xy+(0.5,.5),"$s_"+i+"="+format(ss_i,5)+"$",size->16,color->(1,1,1),align->"left");
drawtext(D+(0.6,0.6),"w="+w,size->12,color->(1,1,1));


fillpoly(((-100,-5),(100,-5),(100,-50),(-100,-50)),color->(0.7,0.6,0.5));
draw((-100,-5),(100,-5),color->(0,0,0),size->2);


if(mover()==H,
  newzoom=exp(|C,H|/|C,G|*8)/10;
  F.xy=E+gauss(zz/newzoom);
);

fold=F.xy;
zoom=exp(|C,H|/|C,G|*8)/10;
//draw(E+(1,0)/zoom);

zz=complex(F-E)*zoom;
fillcircle(E,1/zoom,alpha->0.2,color->(1,1,1));
drawcircle(E,1/zoom);

if(Text0.pressed,zz=zz/|zz|;

F.xy=E+gauss(zz/zoom);
);



F.color=if(|zz|<1,(0,1,0),(1,0,0));

if(Text0.pressed,zz=zz/|zz|;
 F.xy=E+gauss(zz/zoom);
);


if(|zz|~=1,F.color=(1,.9,0));
//zz=complex(F-E);
ee=1;
ss=0;
al=1;
repeat(2000,i,  
 hs_i*ee;
 draw(gauss(ss*zz)/zoom+E,gauss(zz*(ss+hs_i*ee))/zoom+E,alpha->al);
 ss=ss+hs_i*ee;
 ee=ee*zz;
 al=al*0.999
);

F.size=4;
if(Text0.pressed,
 col=F.color;
 F.size=0;
 draw(E+gauss(zz/zoom),color->col,size->5);
);
drawtext((.8,.8)+E+gauss(zz/zoom),"z",size->16);
drawtext(K+(1,1),
"Taylor Series:",size->20);
drawtext(K+(1,-2),
"$f(z)=\sum_{i=1}^\infty a_i\cdot z^i",size->20);
;


</script>
    <script type="text/javascript">
createCindy({
  scripts: "cs*",
  defaultAppearance: {
    dimDependent: 0.7,
    fontFamily: "sans-serif",
    lineSize: 1,
    pointSize: 5.0,
    textsize: 12.0
  },
  angleUnit: "Â°",
  geometry: [
    {name: "A", type: "Free", pos: [0.0, -4.0, -1.9871505412395145], color: [1.0, 1.0, 1.0], size: 3.0},
    {name: "B", type: "Free", pos: [4.0, 0.0, 0.7617410408084809], color: [1.0, 1.0, 1.0], size: 3.0},
    {name: "C", type: "Free", pos: [4.0, -3.0616302186878723, 0.0908637424423635], color: [0.0, 0.0, 0.0], pinned: true, size: 2.0},
    {name: "D", type: "Free", pos: [0.0, -4.0, -0.8309902263365246], color: [0.0, 1.0, 0.0], size: 3.0},
    {name: "E", type: "Free", pos: [4.0, -3.0124999999999997, 0.14282644515159018], color: [0.0, 0.0, 0.0], pinned: true, labeled: true, textsize: 16.0, size: 3.0, printname: "0"},
    {name: "F", type: "Free", pos: [4.0, -1.7066666666666668, 0.1523482081616962], dimDependent: 1, color: [1.0, 0.0, 0.0], size: 4.0},
    {name: "G", type: "Free", pos: [4.0, -2.413793103448276, 0.07163708847728661], color: [0.0, 0.0, 0.0], pinned: true, size: 2.0},
    {name: "a", type: "Segment", color: [0.0, 0.0, 0.0], args: ["C", "G"], labeled: true, printname: "zoom"},
    {name: "H", type: "PointOnSegment", pos: [4.0, -3.061630218687873, 0.09086374244236353], color: [1.0, 1.0, 1.0], args: ["a"], size: 4.0},
    {name: "K", type: "Free", pos: [-0.026058631921824102, -4.0, 0.14887447051631547], color: [1.0, 0.0, 0.0], visible: false},
    {name: "Text0", type: "ToggleButton", color: [0.0, 0.0, 0.0], fillcolor: [0.51, 0.949, 1.0], fillalpha: 0.27272728085517883, text: "snap to circle", textsize: 15.0, dock: {corner: "LL", offset: [52.0, 20.0]}}
  ],
  use:["katex"],
  ports: [{
    id: "CSCanvas",
    width: 739,
    height: 509,
    transform: [{visibleRect: [-4.0696244969416195, 7.745414365146954, 60.60677342219509, -36.80165808524626]}],
    background: "rgb(168,176,192)"
  }],
  cinderella: {build: 1871, version: [2, 9, 1871]}
});
    </script>
</head>
<body>
    <div id="CSCanvas"></div>
</body>
</html>
